<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SODmAX CityVerse - بازی کسب درآمد و استخراج ارز</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        /* متغیرهای طراحی */
        :root {
            --primary: #0066FF;
            --primary-dark: #0052CC;
            --primary-light: #3395FF;
            --secondary: #00D4AA;
            --accent: #FF6B35;
            --premium: #FFD700;
            --success: #10B981;
            --error: #EF4444;
            --warning: #F59E0B;
            --info: #3B82F6;
            
            --bg-primary: #0a0f1c;
            --bg-secondary: #131a2d;
            --bg-surface: rgba(25, 35, 60, 0.95);
            --bg-card: rgba(30, 41, 59, 0.9);
            --bg-overlay: rgba(10, 15, 28, 0.98);
            
            --text-primary: #ffffff;
            --text-secondary: #d1d5db;
            --text-tertiary: #9ca3af;
            --text-muted: #6b7280;
            
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
            --shadow-primary: 0 0 20px rgba(0, 102, 255, 0.4);
            --shadow-secondary: 0 0 20px rgba(0, 212, 170, 0.4);
            
            --gradient-primary: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            --gradient-secondary: linear-gradient(135deg, var(--secondary) 0%, #06b6d4 100%);
            --gradient-accent: linear-gradient(135deg, var(--accent) 0%, #f97316 100%);
            --gradient-premium: linear-gradient(135deg, var(--premium) 0%, #fbbf24 100%);
            --gradient-success: linear-gradient(135deg, var(--success) 0%, #34d399 100%);
            --gradient-dark: linear-gradient(135deg, var(--bg-primary) 0%, #1a2332 100%);
            --gradient-glass: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            
            --transition-fast: 0.2s ease;
            --transition-base: 0.3s ease;
            --transition-slow: 0.5s ease;
            --transition-bounce: 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-2xl: 24px;
            --radius-full: 9999px;
            
            --space-xs: 6px;
            --space-sm: 12px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 40px;
            --space-3xl: 48px;
            
            --z-header: 100;
            --z-menu: 200;
            --z-modal: 300;
            --z-toast: 400;
            --z-auth: 500;
            --z-effect: 10000;
            
            /* مقادیر بازی */
            --mining-power: 18;
            --mining-multiplier: 1;
            --mining-base-reward: 180;
        }

        /* ریست استایل‌ها */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        html {
            font-size: 15px;
            scroll-behavior: smooth;
            height: 100%;
        }

        body {
            font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--gradient-dark);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            line-height: 1.6;
        }

        /* صفحه‌بندی */
        .page {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity var(--transition-slow), transform var(--transition-slow);
        }

        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* لوگو و برندینگ */
        .brand-logo {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
        }

        .logo-icon {
            width: 48px;
            height: 48px;
            background: var(--gradient-primary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 900;
            color: white;
            box-shadow: var(--shadow-primary);
            animation: pulse 2s infinite;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 20px;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .logo-subtitle {
            font-size: 12px;
            color: var(--text-tertiary);
        }

        /* هدر */
        .header {
            background: var(--bg-surface);
            backdrop-filter: blur(20px);
            padding: var(--space-md);
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            position: sticky;
            top: 0;
            z-index: var(--z-header);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-actions {
            display: flex;
            gap: var(--space-sm);
        }

        /* دکمه‌ها */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-lg);
            border: none;
            font-family: inherit;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-base);
            text-decoration: none;
            text-align: center;
            position: relative;
            overflow: hidden;
            outline: none;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity var(--transition-base);
        }

        .btn:hover::before {
            opacity: 1;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--gradient-secondary);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-success {
            background: var(--gradient-success);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-accent {
            background: var(--gradient-accent);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-premium {
            background: var(--gradient-premium);
            color: #000;
            box-shadow: var(--shadow-md);
            font-weight: 800;
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background: rgba(0, 102, 255, 0.1);
        }

        .btn-icon {
            width: 44px;
            height: 44px;
            padding: 0;
            border-radius: var(--radius-md);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
        }

        .btn-icon:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        /* کارت‌ها */
        .card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-radius: var(--radius-xl);
            padding: var(--space-lg);
            border: 1px solid rgba(255, 255, 255, 0.15);
            margin-bottom: var(--space-lg);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
        }

        .card-title {
            font-size: 18px;
            font-weight: 900;
            color: var(--text-primary);
            margin-bottom: var(--space-lg);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        /* آمار سریع */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-base);
            cursor: pointer;
        }

        .stat-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 24px;
            font-weight: 900;
            color: var(--text-primary);
            margin-bottom: 4px;
            line-height: 1;
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-tertiary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ماینر */
        .miner-container {
            text-align: center;
            margin: var(--space-xl) 0;
        }

        .miner-3d {
            width: 200px;
            height: 200px;
            margin: 0 auto var(--space-lg);
            background: linear-gradient(145deg, 
                rgba(0, 102, 255, 0.15) 0%,
                rgba(30, 41, 59, 0.9) 50%,
                rgba(0, 102, 255, 0.05) 100%);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            border: 3px solid transparent;
            animation: 
                minerFloat 6s ease-in-out infinite,
                minerGlow 4s infinite alternate;
            box-shadow: 
                inset 0 0 40px rgba(0, 102, 255, 0.3),
                0 16px 40px rgba(0, 0, 0, 0.5),
                0 0 50px rgba(0, 102, 255, 0.2);
        }

        .miner-core {
            position: relative;
            z-index: 1;
            text-align: center;
        }

        .core-icon {
            font-size: 48px;
            margin-bottom: var(--space-md);
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: 
                iconPulse 2s infinite,
                iconRotate 20s infinite linear;
        }

        .click-reward {
            font-size: 24px;
            font-weight: 900;
            color: var(--text-primary);
            text-shadow: 
                0 2px 8px rgba(0, 102, 255, 0.5),
                0 0 20px rgba(0, 102, 255, 0.8);
            margin-bottom: var(--space-xs);
        }

        .mining-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-md);
            margin-top: var(--space-lg);
        }

        .mining-btn {
            padding: var(--space-md);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: var(--gradient-glass);
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-bounce);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .mining-btn:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
        }

        /* کمپین‌ها */
        .campaigns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .campaign-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-base);
            cursor: pointer;
        }

        .campaign-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-4px);
            border-color: var(--primary);
        }

        .campaign-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-md);
        }

        .campaign-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            flex: 1;
        }

        .campaign-reward {
            background: var(--gradient-secondary);
            color: white;
            padding: 6px 12px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 700;
            white-space: nowrap;
        }

        .campaign-progress {
            margin: var(--space-md) 0;
        }

        .progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: var(--radius-full);
            overflow: hidden;
            margin-bottom: 6px;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            transition: width 1s ease;
            position: relative;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-tertiary);
        }

        /* کیف پول */
        .wallet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .wallet-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all var(--transition-base);
        }

        .wallet-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .wallet-icon {
            font-size: 32px;
            margin-bottom: var(--space-md);
        }

        .wallet-amount {
            font-size: 28px;
            font-weight: 900;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .wallet-currency {
            font-size: 14px;
            color: var(--text-tertiary);
            text-transform: uppercase;
        }

        /* دعوت دوستان */
        .referral-box {
            background: linear-gradient(135deg, rgba(0, 102, 255, 0.1), rgba(0, 212, 170, 0.1));
            border: 2px dashed var(--primary);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            text-align: center;
            margin-bottom: var(--space-lg);
        }

        .referral-link {
            background: rgba(255, 255, 255, 0.1);
            padding: var(--space-md);
            border-radius: var(--radius-md);
            font-family: monospace;
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 1px;
            margin: var(--space-md) 0;
            word-break: break-all;
        }

        .share-buttons {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            margin-top: var(--space-lg);
        }

        .share-btn {
            padding: var(--space-md);
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-base);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .share-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        /* ناوبری پایین */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-surface);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            display: flex;
            justify-content: space-around;
            padding: var(--space-sm) 0;
            z-index: var(--z-header);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            color: var(--text-tertiary);
            text-decoration: none;
            transition: all var(--transition-fast);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-md);
            min-width: 60px;
        }

        .nav-item.active,
        .nav-item:hover {
            color: var(--primary);
            background: rgba(0, 102, 255, 0.1);
        }

        .nav-icon {
            font-size: 18px;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 600;
        }

        /* مودال */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            align-items: center;
            justify-content: center;
            z-index: var(--z-modal);
            opacity: 0;
            transition: opacity var(--transition-base);
            padding: var(--space-md);
        }

        .modal.active {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: var(--bg-surface);
            border-radius: var(--radius-xl);
            padding: var(--space-lg);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transform: translateY(40px) scale(0.9);
            transition: all var(--transition-bounce);
            position: relative;
        }

        .modal.active .modal-content {
            transform: translateY(0) scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-md);
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
        }

        .modal-title {
            font-size: 18px;
            font-weight: 900;
            color: var(--text-primary);
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-primary);
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .modal-close:hover {
            background: var(--gradient-primary);
            transform: rotate(90deg);
        }

        /* توست */
        .toast-container {
            position: fixed;
            top: 80px;
            left: 0;
            right: 0;
            z-index: var(--z-toast);
            padding: 0 var(--space-md);
            pointer-events: none;
        }

        .toast {
            background: var(--bg-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            border-left: 4px solid var(--primary);
            box-shadow: var(--shadow-lg);
            backdrop-filter: blur(20px);
            animation: slideDown 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            margin-bottom: var(--space-sm);
            pointer-events: auto;
        }

        .toast-success {
            border-left-color: var(--success);
        }

        .toast-error {
            border-left-color: var(--error);
        }

        .toast-warning {
            border-left-color: var(--warning);
        }

        .toast-info {
            border-left-color: var(--info);
        }

        .toast-icon {
            width: 28px;
            height: 28px;
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            flex-shrink: 0;
        }

        .toast-success .toast-icon {
            background: var(--gradient-success);
        }

        .toast-error .toast-icon {
            background: var(--gradient-accent);
        }

        .toast-warning .toast-icon {
            background: var(--gradient-premium);
        }

        .toast-info .toast-icon {
            background: var(--gradient-primary);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-size: 13px;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .toast-message {
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        /* افکت‌ها */
        .mining-effect {
            position: fixed;
            color: var(--primary-light);
            font-weight: 900;
            font-size: 24px;
            pointer-events: none;
            z-index: var(--z-effect);
            text-shadow: 0 0 20px var(--primary);
            animation: miningFloat 1s ease-out forwards;
            transform-origin: center;
        }

        .mining-effect span {
            display: block;
            padding: 4px 12px;
            background: rgba(0, 102, 255, 0.2);
            border-radius: var(--radius-full);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 102, 255, 0.3);
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--primary-light);
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 0.5s ease-out forwards;
        }

        /* انیمیشن‌ها */
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 1;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        @keyframes minerFloat {
            0%, 100% {
                transform: translateY(0) rotate(0deg);
            }
            25% {
                transform: translateY(-15px) rotate(5deg);
            }
            50% {
                transform: translateY(0) rotate(0deg);
            }
            75% {
                transform: translateY(-15px) rotate(-5deg);
            }
        }

        @keyframes minerGlow {
            0%, 100% {
                box-shadow: 
                    inset 0 0 40px rgba(0, 102, 255, 0.3),
                    0 16px 40px rgba(0, 0, 0, 0.5),
                    0 0 50px rgba(0, 102, 255, 0.2);
            }
            50% {
                box-shadow: 
                    inset 0 0 40px rgba(0, 102, 255, 0.4),
                    0 16px 40px rgba(0, 0, 0, 0.5),
                    0 0 80px rgba(0, 102, 255, 0.4);
            }
        }

        @keyframes iconPulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
        }

        @keyframes iconRotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        @keyframes slideDown {
            from {
                transform: translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes miningFloat {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -150px) scale(1.5);
                opacity: 0;
            }
        }

        @keyframes sparkle {
            0% {
                transform: scale(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: scale(1) rotate(180deg);
                opacity: 0;
            }
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* ریسپانسیو */
        @media (max-width: 768px) {
            html {
                font-size: 14px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .mining-controls {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .campaigns-grid {
                grid-template-columns: 1fr;
            }
            
            .wallet-grid {
                grid-template-columns: 1fr;
            }
            
            .share-buttons {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            .logo-title {
                font-size: 16px;
            }
            
            .logo-icon {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
            
            .miner-3d {
                width: 150px;
                height: 150px;
            }
            
            .stat-value {
                font-size: 20px;
            }
        }

        /* اسکرول‌بار سفارشی */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-light);
        }

        /* انتخاب متن */
        ::selection {
            background: rgba(0, 102, 255, 0.3);
            color: white;
        }

        /* لودر */
        .loader {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: var(--space-xl);
        }

        .loader::after {
            content: '';
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--primary);
            border-radius: var(--radius-full);
            animation: spin 1s linear infinite;
        }

        /* سوئیچ */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .switch-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 34px;
        }
        
        .switch-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .switch-slider {
            background-color: var(--primary);
        }
        
        input:checked + .switch-slider:before {
            transform: translateX(24px);
        }

        /* تگ‌های وضعیت */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            font-size: 11px;
            font-weight: 700;
            border-radius: var(--radius-full);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-success {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(245, 158, 11, 0.2);
            color: var(--warning);
        }

        .badge-error {
            background: rgba(239, 68, 68, 0.2);
            color: var(--error);
        }

        .badge-info {
            background: rgba(59, 130, 246, 0.2);
            color: var(--info);
        }

        .badge-premium {
            background: rgba(255, 215, 0, 0.2);
            color: var(--premium);
        }

        /* جدول‌ها */
        .table-container {
            overflow-x: auto;
            border-radius: var(--radius-lg);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th {
            padding: var(--space-md);
            text-align: right;
            font-weight: 700;
            color: var(--text-secondary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.05);
        }

        .table td {
            padding: var(--space-md);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }

        /* فرم‌ها */
        .form-group {
            margin-bottom: var(--space-lg);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-xs);
            font-size: 13px;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .form-input {
            width: 100%;
            padding: var(--space-md);
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: var(--radius-lg);
            color: var(--text-primary);
            font-family: inherit;
            font-size: 14px;
            transition: all var(--transition-base);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.2);
            background: rgba(255, 255, 255, 0.12);
        }

        .form-input.error {
            border-color: var(--error);
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2);
        }

        .form-error {
            font-size: 12px;
            color: var(--error);
            margin-top: var(--space-xs);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            opacity: 0;
            transform: translateY(-5px);
            transition: all var(--transition-base);
        }

        .form-error.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* صفحه احراز هویت */
        .auth-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-overlay);
            backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-md);
            z-index: var(--z-auth);
            transition: opacity var(--transition-base);
        }

        .auth-page.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .auth-card {
            background: var(--bg-surface);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            width: 100%;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            box-shadow: var(--shadow-lg);
            animation: slideUpAuth 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            position: relative;
            overflow: hidden;
        }

        .auth-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-primary);
        }

        @keyframes slideUpAuth {
            from {
                transform: translateY(40px) scale(0.95);
                opacity: 0;
            }
            to {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .auth-header {
            text-align: center;
            margin-bottom: var(--space-xl);
        }

        .auth-title {
            font-size: 24px;
            font-weight: 900;
            color: var(--text-primary);
            margin-bottom: var(--space-xs);
        }

        .auth-subtitle {
            font-size: 14px;
            color: var(--text-tertiary);
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: var(--space-md);
        }

        .password-toggle {
            position: absolute;
            left: var(--space-md);
            top: 42px;
            background: none;
            border: none;
            color: var(--text-tertiary);
            cursor: pointer;
            transition: color var(--transition-base);
        }

        .password-toggle:hover {
            color: var(--text-primary);
        }

        .auth-btn {
            width: 100%;
            padding: var(--space-md);
            background: var(--gradient-primary);
            border: none;
            border-radius: var(--radius-lg);
            color: white;
            font-family: inherit;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all var(--transition-base);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            margin-top: var(--space-md);
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .auth-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .auth-switch {
            text-align: center;
            margin-top: var(--space-lg);
            padding-top: var(--space-lg);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .auth-switch-text {
            font-size: 13px;
            color: var(--text-tertiary);
        }

        .auth-switch-btn {
            background: none;
            border: none;
            color: var(--primary);
            font-weight: 700;
            cursor: pointer;
            margin-right: var(--space-xs);
            transition: color var(--transition-base);
        }

        .auth-switch-btn:hover {
            color: var(--primary-light);
        }

        .auth-terms {
            font-size: 11px;
            color: var(--text-tertiary);
            text-align: center;
            margin-top: var(--space-lg);
            line-height: 1.5;
        }

        .auth-terms a {
            color: var(--primary);
            text-decoration: none;
        }

        .auth-terms a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- صفحه احراز هویت -->
    <div id="authPage" class="auth-page">
        <div class="auth-card" id="registerForm">
            <div class="auth-header">
                <div class="brand-logo justify-center mb-6">
                    <div class="logo-icon">⚡</div>
                    <div class="logo-text">
                        <div class="logo-title">SODmAX</div>
                        <div class="logo-subtitle">CityVerse Pro</div>
                    </div>
                </div>
                <h2 class="auth-title">ثبت‌نام در SODmAX</h2>
                <p class="auth-subtitle">حساب کاربری جدید ایجاد کنید</p>
            </div>
            
            <form id="registerFormElement" class="auth-form">
                <div class="form-group">
                    <label class="form-label" for="registerName">نام و نام خانوادگی</label>
                    <input type="text" id="registerName" class="form-input" placeholder="مثلاً: علی محمدی" required>
                    <div class="form-error" id="nameError">
                        <i class="fas fa-exclamation-circle"></i>
                        نام و نام خانوادگی الزامی است
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerPhone">شماره موبایل</label>
                    <input type="tel" id="registerPhone" class="form-input" placeholder="مثلاً: 09123456789" required>
                    <div class="form-error" id="phoneError">
                        <i class="fas fa-exclamation-circle"></i>
                        شماره موبایل معتبر وارد کنید
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerPassword">رمز عبور</label>
                    <input type="password" id="registerPassword" class="form-input" placeholder="حداقل ۶ کاراکتر" required>
                    <button type="button" class="password-toggle" id="toggleRegisterPassword">
                        <i class="fas fa-eye"></i>
                    </button>
                    <div class="form-error" id="passwordError">
                        <i class="fas fa-exclamation-circle"></i>
                        رمز عبور باید حداقل ۶ کاراکتر باشد
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerConfirmPassword">تکرار رمز عبور</label>
                    <input type="password" id="registerConfirmPassword" class="form-input" placeholder="رمز عبور را مجدداً وارد کنید" required>
                    <button type="button" class="password-toggle" id="toggleRegisterConfirmPassword">
                        <i class="fas fa-eye"></i>
                    </button>
                    <div class="form-error" id="confirmPasswordError">
                        <i class="fas fa-exclamation-circle"></i>
                        رمز عبور با تکرار آن مطابقت ندارد
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="registerReferralCode">کد دعوت (اختیاری)</label>
                    <input type="text" id="registerReferralCode" class="form-input" placeholder="کد دعوت معرف خود را وارد کنید">
                    <div class="form-error" id="referralCodeError">
                        <i class="fas fa-exclamation-circle"></i>
                        کد دعوت معتبر نیست
                    </div>
                </div>
                
                <button type="submit" class="auth-btn" id="registerBtn">
                    <i class="fas fa-user-plus"></i>
                    ایجاد حساب کاربری
                </button>
            </form>
            
            <div class="auth-switch">
                <span class="auth-switch-text">قبلاً ثبت‌نام کرده‌اید؟</span>
                <button class="auth-switch-btn" id="showLoginBtn">ورود به حساب</button>
            </div>
            
            <div class="auth-terms">
                با ثبت‌نام، <a href="#" onclick="showTerms()">قوانین و مقررات</a> و <a href="#" onclick="showPrivacy()">حریم خصوصی</a> SODmAX CityVerse را می‌پذیرید.
            </div>
        </div>
        
        <div class="auth-card hidden" id="loginForm">
            <div class="auth-header">
                <div class="brand-logo justify-center mb-6">
                    <div class="logo-icon">⚡</div>
                    <div class="logo-text">
                        <div class="logo-title">SODmAX</div>
                        <div class="logo-subtitle">CityVerse Pro</div>
                    </div>
                </div>
                <h2 class="auth-title">ورود به SODmAX</h2>
                <p class="auth-subtitle">به حساب کاربری خود وارد شوید</p>
            </div>
            
            <form id="loginFormElement" class="auth-form">
                <div class="form-group">
                    <label class="form-label" for="loginPhone">شماره موبایل</label>
                    <input type="tel" id="loginPhone" class="form-input" placeholder="شماره موبایل خود را وارد کنید" required>
                    <div class="form-error" id="loginPhoneError">
                        <i class="fas fa-exclamation-circle"></i>
                        شماره موبایل خود را وارد کنید
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="loginPassword">رمز عبور</label>
                    <input type="password" id="loginPassword" class="form-input" placeholder="رمز عبور خود را وارد کنید" required>
                    <button type="button" class="password-toggle" id="toggleLoginPassword">
                        <i class="fas fa-eye"></i>
                    </button>
                    <div class="form-error" id="loginPasswordError">
                        <i class="fas fa-exclamation-circle"></i>
                        رمز عبور خود را وارد کنید
                    </div>
                </div>
                
                <div class="form-group" style="text-align: left; margin-top: -8px;">
                    <button type="button" class="auth-switch-btn" id="forgotPasswordBtn" style="font-size: 12px;">
                        رمز عبور را فراموش کرده‌اید؟
                    </button>
                </div>
                
                <button type="submit" class="auth-btn" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i>
                    ورود به حساب
                </button>
            </form>
            
            <div class="auth-switch">
                <span class="auth-switch-text">حساب کاربری ندارید؟</span>
                <button class="auth-switch-btn" id="showRegisterBtn">ثبت‌نام کنید</button>
            </div>
        </div>
    </div>

    <!-- برنامه اصلی -->
    <div id="app" style="display: none;">
        <!-- هدر -->
        <header class="header">
            <div class="brand-logo">
                <div class="logo-icon">⚡</div>
                <div class="logo-text">
                    <div class="logo-title">SODmAX</div>
                    <div class="logo-subtitle">CityVerse Pro</div>
                </div>
            </div>
            
            <div class="header-actions">
                <button class="btn-icon" onclick="showNotifications()" id="notificationBtn">
                    <i class="fas fa-bell"></i>
                    <span class="badge" id="notificationBadge" style="position: absolute; top: -5px; right: -5px; display: none;"></span>
                </button>
                <button class="btn-icon" onclick="showUserMenu()">
                    <i class="fas fa-user"></i>
                </button>
            </div>
        </header>

        <!-- محتوای اصلی -->
        <main style="padding: var(--space-md); padding-bottom: 80px;">
            <!-- صفحه داشبورد -->
            <div id="pageDashboard" class="page active">
                <!-- آمار سریع -->
                <div class="stats-grid">
                    <div class="stat-item" onclick="showModal('walletModal')">
                        <div class="stat-value" id="statSOD">1.8M</div>
                        <div class="stat-label">موجودی SOD</div>
                    </div>
                    <div class="stat-item" onclick="showModal('walletModal')">
                        <div class="stat-value" id="statToman">28K</div>
                        <div class="stat-label">موجودی تومان</div>
                    </div>
                    <div class="stat-item" onclick="showModal('userModal')">
                        <div class="stat-value" id="statReferrals">24</div>
                        <div class="stat-label">زیرمجموعه</div>
                    </div>
                </div>

                <!-- مرکز استخراج -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-hard-hat"></i>
                        مرکز استخراج SOD
                    </h3>
                    
                    <div class="miner-container">
                        <div class="miner-3d" onclick="manualMine()">
                            <div class="miner-core">
                                <div class="core-icon">⚡</div>
                                <div class="click-reward" id="clickReward">+180 SOD</div>
                                <div style="color: var(--text-tertiary); font-size: 12px;">
                                    برای استخراج کلیک کنید
                                </div>
                            </div>
                        </div>
                        
                        <div class="mining-controls">
                            <button class="mining-btn" onclick="toggleAutoMining()" id="autoMiningBtn">
                                <i class="fas fa-robot"></i>
                                <span>خودکار</span>
                            </button>
                            <button class="mining-btn" onclick="boostMining()">
                                <i class="fas fa-bolt"></i>
                                <span>افزایش قدرت</span>
                            </button>
                            <button class="mining-btn" onclick="upgradeMiner()">
                                <i class="fas fa-arrow-up"></i>
                                <span>ارتقاء</span>
                            </button>
                            <button class="mining-btn" onclick="showPage('mining')">
                                <i class="fas fa-chart-bar"></i>
                                <span>آمار</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- کمپین‌های فعال -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-tasks"></i>
                        کمپین‌های فعال
                    </h3>
                    
                    <div class="campaigns-grid">
                        <div class="campaign-card" onclick="showCampaignDetail(1)">
                            <div class="campaign-header">
                                <div class="campaign-title">۱۰۰ کلیک در بازی</div>
                                <div class="campaign-reward">+۵۰۰ تومان</div>
                            </div>
                            <div class="campaign-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="campaign1Progress" style="width: 45%"></div>
                                </div>
                                <div class="progress-text">
                                    <span>پیشرفت</span>
                                    <span id="campaign1Text">۴۵/۱۰۰</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="campaign-card" onclick="showCampaignDetail(2)">
                            <div class="campaign-header">
                                <div class="campaign-title">دعوت ۵ دوست</div>
                                <div class="campaign-reward">+۱,۰۰۰ تومان</div>
                            </div>
                            <div class="campaign-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="campaign2Progress" style="width: 40%"></div>
                                </div>
                                <div class="progress-text">
                                    <span>پیشرفت</span>
                                    <span id="campaign2Text">۲/۵</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-outline" style="width: 100%; margin-top: var(--space-md);" onclick="showPage('campaigns')">
                        <i class="fas fa-list"></i>
                        مشاهده همه کمپین‌ها
                    </button>
                </div>

                <!-- پاداش روزانه -->
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-gift"></i>
                        پاداش روزانه
                    </h3>
                    
                    <div style="text-align: center; padding: var(--space-lg);">
                        <div style="font-size: 48px; font-weight: 900; color: var(--primary); margin-bottom: var(--space-sm);">🎁</div>
                        <div style="font-size: 16px; font-weight: 900; color: var(--text-primary); margin: var(--space-sm) 0;">
                            پاداش روزانه شما آماده است!
                        </div>
                        <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: var(--space-lg);">
                            هر روز وارد شوید و پاداش دریافت کنید
                        </div>
                        
                        <button class="btn btn-success" onclick="claimDailyReward()">
                            <i class="fas fa-gift"></i>
                            دریافت پاداش روزانه
                        </button>
                    </div>
                </div>
            </div>

            <!-- صفحه استخراج -->
            <div id="pageMining" class="page">
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-chart-line"></i>
                        آمار استخراج
                    </h3>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="miningPower">18x</div>
                            <div class="stat-label">قدرت</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="miningToday">2,450</div>
                            <div class="stat-label">امروز</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="miningTotal">1.8M</div>
                            <div class="stat-label">کل</div>
                        </div>
                    </div>
                    
                    <div style="margin: var(--space-lg) 0;">
                        <h4 style="font-size: 14px; color: var(--text-tertiary); margin-bottom: var(--space-sm);">
                            <i class="fas fa-history"></i>
                            تاریخچه استخراج
                        </h4>
                        <div style="background: rgba(255, 255, 255, 0.05); padding: var(--space-md); border-radius: var(--radius-lg);">
                            <div style="display: flex; justify-content: space-between; font-size: 12px; padding: var(--space-xs) 0;">
                                <span>امروز</span>
                                <span id="miningTodayText">+2,450 SOD</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 12px; padding: var(--space-xs) 0; color: var(--text-tertiary);">
                                <span>دیروز</span>
                                <span>+3,210 SOD</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 12px; padding: var(--space-xs) 0; color: var(--text-tertiary);">
                                <span>هفته جاری</span>
                                <span>+15,840 SOD</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-crown"></i>
                        ارتقاء ماینر
                    </h3>
                    
                    <div style="text-align: center; margin: var(--space-lg) 0;">
                        <div style="font-size: 36px; font-weight: 900; color: var(--primary); margin-bottom: var(--space-sm);">
                            سطح <span id="minerLevel">۳</span>
                        </div>
                        <div style="font-size: 12px; color: var(--text-tertiary);">
                            تا سطح بعدی: <span id="nextLevelCost">۵۰,۰۰۰</span> SOD
                        </div>
                    </div>
                    
                    <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--radius-lg); padding: var(--space-md); margin-bottom: var(--space-lg);">
                        <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: var(--space-xs);">
                            <span>قدرت فعلی</span>
                            <span id="currentPower">۱۸x</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: var(--space-xs); color: var(--text-tertiary);">
                            <span>قدرت بعدی</span>
                            <span id="nextPower">۲۳x</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 12px; color: var(--text-tertiary);">
                            <span>هزینه ارتقاء</span>
                            <span id="upgradeCost">۵۰,۰۰۰ SOD</span>
                        </div>
                    </div>
                    
                    <button class="btn btn-premium" onclick="upgradeMiner()" style="width: 100%;">
                        <i class="fas fa-arrow-up"></i>
                        ارتقاء ماینر (<span id="upgradeCostBtn">۵۰K</span> SOD)
                    </button>
                </div>
            </div>

            <!-- صفحه کمپین‌ها -->
            <div id="pageCampaigns" class="page">
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-bullhorn"></i>
                        کمپین‌های کسب‌وکارها
                    </h3>
                    
                    <div class="campaigns-grid">
                        <div class="campaign-card" onclick="startCampaign('digikala')">
                            <div class="campaign-header">
                                <div class="campaign-title">کلیک تبلیغ دیجی‌کالا</div>
                                <div class="campaign-reward">+۵۰۰ تومان</div>
                            </div>
                            <div class="campaign-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 75%"></div>
                                </div>
                                <div class="progress-text">
                                    <span>ظرفیت باقی‌مانده</span>
                                    <span>۲۵۰/۱۰۰۰</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: var(--space-sm); margin-top: var(--space-md);">
                                <div style="width: 24px; height: 24px; background: #ef4056; border-radius: var(--radius-sm);"></div>
                                <span style="font-size: 12px; color: var(--text-tertiary);">دیجی‌کالا</span>
                            </div>
                        </div>
                        
                        <div class="campaign-card" onclick="startCampaign('snapp')">
                            <div class="campaign-header">
                                <div class="campaign-title">نصب اپلیکیشن اسنپ</div>
                                <div class="campaign-reward">+۵,۰۰۰ تومان</div>
                            </div>
                            <div class="campaign-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 60%"></div>
                                </div>
                                <div class="progress-text">
                                    <span>ظرفیت باقی‌مانده</span>
                                    <span>۲۰۰/۵۰۰</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: var(--space-sm); margin-top: var(--space-md);">
                                <div style="width: 24px; height: 24px; background: #00d166; border-radius: var(--radius-sm);"></div>
                                <span style="font-size: 12px; color: var(--text-tertiary);">اسنپ</span>
                            </div>
                        </div>
                        
                        <div class="campaign-card" onclick="startCampaign('ap')">
                            <div class="campaign-header">
                                <div class="campaign-title">اشتراک اینستاگرام</div>
                                <div class="campaign-reward">+۲,۰۰۰ SOD</div>
                            </div>
                            <div class="campaign-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 90%"></div>
                                </div>
                                <div class="progress-text">
                                    <span>ظرفیت باقی‌مانده</span>
                                    <span>۲۰۰/۲,۰۰۰</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: var(--space-sm); margin-top: var(--space-md);">
                                <div style="width: 24px; height: 24px; background: #3b82f6; border-radius: var(--radius-sm);"></div>
                                <span style="font-size: 12px; color: var(--text-tertiary);">آپ</span>
                            </div>
                        </div>
                        
                        <div class="campaign-card" onclick="startCampaign('tapsi')">
                            <div class="campaign-header">
                                <div class="campaign-title">مشاهده ویدیو تبلیغاتی</div>
                                <div class="campaign-reward">+۱,۰۰۰ تومان</div>
                            </div>
                            <div class="campaign-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 30%"></div>
                                </div>
                                <div class="progress-text">
                                    <span>ظرفیت باقی‌مانده</span>
                                    <span>۴۴۰/۶۰۰</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: var(--space-sm); margin-top: var(--space-md);">
                                <div style="width: 24px; height: 24px; background: #ff6b35; border-radius: var(--radius-sm);"></div>
                                <span style="font-size: 12px; color: var(--text-tertiary);">تپسی</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: var(--space-xl);">
                        <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: var(--space-sm);">
                            تاکنون از کمپین‌ها کسب کرده‌اید:
                        </div>
                        <div style="font-size: 24px; font-weight: 900; color: var(--secondary);">
                            ۱۲۴,۰۰۰ تومان
                        </div>
                    </div>
                </div>
            </div>

            <!-- صفحه کیف پول -->
            <div id="pageWallet" class="page">
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-wallet"></i>
                        کیف پول چند ارزی
                    </h3>
                    
                    <div class="wallet-grid">
                        <div class="wallet-card" onclick="showModal('walletModal')">
                            <div class="wallet-icon" style="color: var(--primary);">₿</div>
                            <div class="wallet-amount" id="walletSOD">1,845,200</div>
                            <div class="wallet-currency">SOD</div>
                        </div>
                        
                        <div class="wallet-card" onclick="showModal('walletModal')">
                            <div class="wallet-icon" style="color: var(--secondary);">﷼</div>
                            <div class="wallet-amount" id="walletToman">28,400</div>
                            <div class="wallet-currency">تومان</div>
                        </div>
                        
                        <div class="wallet-card" onclick="showModal('walletModal')">
                            <div class="wallet-icon" style="color: var(--info);">$</div>
                            <div class="wallet-amount">120.5</div>
                            <div class="wallet-currency">USDT</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-sm); margin-top: var(--space-lg);">
                        <button class="btn btn-success" onclick="withdrawToman()">
                            <i class="fas fa-download"></i>
                            برداشت
                        </button>
                        <button class="btn btn-outline" onclick="buySOD()">
                            <i class="fas fa-shopping-cart"></i>
                            خرید SOD
                        </button>
                        <button class="btn btn-primary" onclick="convertCurrency()">
                            <i class="fas fa-exchange-alt"></i>
                            تبدیل
                        </button>
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-history"></i>
                        آخرین تراکنش‌ها
                    </h3>
                    
                    <div class="table-container">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>نوع</th>
                                    <th>مبلغ</th>
                                    <th>تاریخ</th>
                                    <th>وضعیت</th>
                                </tr>
                            </thead>
                            <tbody id="transactionHistory">
                                <!-- تراکنش‌ها به صورت داینامیک اضافه می‌شوند -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- صفحه دعوت دوستان -->
            <div id="pageReferrals" class="page">
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-user-plus"></i>
                        دعوت دوستان و کسب درآمد
                    </h3>
                    
                    <div class="referral-box">
                        <div style="font-size: 48px; font-weight: 900; color: var(--primary); margin-bottom: var(--space-sm);">
                            🤝
                        </div>
                        <div style="font-size: 24px; font-weight: 900; color: var(--text-primary); margin-bottom: var(--space-xs);" id="referralCount">
                            ۲۴ دوست دعوت کرده‌اید
                        </div>
                        <div style="font-size: 16px; color: var(--text-tertiary); margin-bottom: var(--space-lg);">
                            تاکنون <span style="color: var(--secondary); font-weight: 700;" id="totalReferralEarnings">۱۲۴,۰۰۰</span> تومان از دعوت دوستان کسب کرده‌اید
                        </div>
                        
                        <div class="referral-link" id="referralLink">
                            https://sodmax.city/invite/ALI12345
                        </div>
                        
                        <button class="btn btn-primary" onclick="copyReferralLink()">
                            <i class="fas fa-copy"></i>
                            کپی لینک دعوت
                        </button>
                    </div>
                    
                    <div style="margin-top: var(--space-xl);">
                        <h4 style="font-size: 16px; font-weight: 900; color: var(--text-primary); margin-bottom: var(--space-lg);">
                            <i class="fas fa-share-alt"></i>
                            اشتراک‌گذاری
                        </h4>
                        
                        <div class="share-buttons">
                            <button class="share-btn" onclick="shareViaWhatsApp()">
                                <i class="fab fa-whatsapp"></i>
                                واتساپ
                            </button>
                            <button class="share-btn" onclick="shareViaTelegram()">
                                <i class="fab fa-telegram"></i>
                                تلگرام
                            </button>
                            <button class="share-btn" onclick="shareViaInstagram()">
                                <i class="fab fa-instagram"></i>
                                اینستاگرام
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-chart-pie"></i>
                        آمار دعوت
                    </h3>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="totalInvites">۲۴</div>
                            <div class="stat-label">کل دعوت‌ها</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="activeInvites">۱۸</div>
                            <div class="stat-label">فعال</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="pendingInvites">۳</div>
                            <div class="stat-label">در انتظار</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: var(--space-xl);">
                        <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: var(--space-sm);">
                            پاداش هر دعوت موفق
                        </div>
                        <div style="font-size: 32px; font-weight: 900; color: var(--secondary);">
                            ۱,۰۰۰ تومان
                        </div>
                        <div style="font-size: 12px; color: var(--text-tertiary); margin-top: var(--space-sm);">
                            +۵۰۰ SOD برای دعوت‌شونده
                        </div>
                    </div>
                </div>
            </div>

            <!-- صفحه پروفایل -->
            <div id="pageProfile" class="page">
                <div class="card">
                    <h3 class="card-title">
                        <i class="fas fa-user"></i>
                        پروفایل کاربری
                    </h3>
                    
                    <div style="text-align: center; margin-bottom: var(--space-xl);">
                        <div style="width: 100px; height: 100px; margin: 0 auto var(--space-lg); background: var(--gradient-primary); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; font-size: 40px; font-weight: 800; color: white;" id="userAvatar">
                            ع
                        </div>
                        <h4 style="font-size: 24px; font-weight: 900; margin-bottom: var(--space-xs); background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="userName">
                            علی محمدی
                        </h4>
                        <p style="color: var(--text-tertiary); font-size: 14px; margin-bottom: var(--space-md);" id="userPhone">
                            <i class="fas fa-phone"></i> ۰۹۱۲۳۴۵۶۷۸۹
                        </p>
                        <div style="background: var(--gradient-primary); color: white; padding: var(--space-xs) var(--space-lg); border-radius: var(--radius-full); display: inline-block; font-size: 12px; font-weight: 700;">
                            سطح <span id="userLevel">۵</span>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="userJoinDate">۱۴۰۲/۰۵/۱۰</div>
                            <div class="stat-label">عضویت از</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="userLastLogin">امروز</div>
                            <div class="stat-label">آخرین ورود</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="userTotalEarned">۱۲۴K</div>
                            <div class="stat-label">درآمد کل</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: var(--space-xl);">
                        <button class="btn btn-outline" style="width: 100%; margin-bottom: var(--space-sm);" onclick="editProfile()">
                            <i class="fas fa-edit"></i>
                            ویرایش پروفایل
                        </button>
                        <button class="btn btn-outline" style="width: 100%; margin-bottom: var(--space-sm);" onclick="changePassword()">
                            <i class="fas fa-key"></i>
                            تغییر رمز عبور
                        </button>
                        <button class="btn btn-outline" style="width: 100%;" onclick="showPage('settings')">
                            <i class="fas fa-cog"></i>
                            تنظیمات
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- ناوبری پایین -->
        <nav class="bottom-nav">
            <a href="#dashboard" class="nav-item active" onclick="showPage('dashboard')">
                <i class="fas fa-home nav-icon"></i>
                <span class="nav-label">داشبورد</span>
            </a>
            <a href="#mining" class="nav-item" onclick="showPage('mining')">
                <i class="fas fa-hard-hat nav-icon"></i>
                <span class="nav-label">استخراج</span>
            </a>
            <a href="#campaigns" class="nav-item" onclick="showPage('campaigns')">
                <i class="fas fa-bullhorn nav-icon"></i>
                <span class="nav-label">کمپین‌ها</span>
            </a>
            <a href="#wallet" class="nav-item" onclick="showPage('wallet')">
                <i class="fas fa-wallet nav-icon"></i>
                <span class="nav-label">کیف پول</span>
            </a>
            <a href="#referrals" class="nav-item" onclick="showPage('referrals')">
                <i class="fas fa-user-plus nav-icon"></i>
                <span class="nav-label">دعوت</span>
            </a>
        </nav>
    </div>

    <!-- مودال‌ها -->
    <div id="walletModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">کیف پول چند ارزی</h3>
                <button class="modal-close" onclick="closeModal('walletModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div style="margin-bottom: var(--space-xl);">
                <div style="background: rgba(0, 102, 255, 0.15); padding: var(--space-lg); border-radius: var(--radius-lg); text-align: center; margin-bottom: var(--space-md);">
                    <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: var(--space-sm);">موجودی SOD</div>
                    <div style="font-size: 24px; font-weight: 900; color: var(--primary);" id="modalSOD">1,845,200 SOD</div>
                </div>
                
                <div style="background: rgba(0, 212, 170, 0.15); padding: var(--space-lg); border-radius: var(--radius-lg); text-align: center; margin-bottom: var(--space-md);">
                    <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: var(--space-sm);">موجودی تومان</div>
                    <div style="font-size: 24px; font-weight: 900; color: var(--secondary);" id="modalToman">28,400 تومان</div>
                </div>
                
                <div style="background: rgba(59, 130, 246, 0.15); padding: var(--space-lg); border-radius: var(--radius-lg); text-align: center;">
                    <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: var(--space-sm);">موجودی USDT</div>
                    <div style="font-size: 24px; font-weight: 900; color: #3b82f6;">120.5 USDT</div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--space-sm);">
                <button class="btn btn-success" onclick="withdrawToman()">
                    <i class="fas fa-download"></i>
                    برداشت
                </button>
                <button class="btn btn-outline" onclick="buySOD()">
                    <i class="fas fa-shopping-cart"></i>
                    خرید
                </button>
                <button class="btn btn-primary" onclick="convertCurrency()">
                    <i class="fas fa-exchange-alt"></i>
                    تبدیل
                </button>
            </div>
        </div>
    </div>

    <div id="userModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">پروفایل کاربری</h3>
                <button class="modal-close" onclick="closeModal('userModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div style="text-align: center; margin-bottom: var(--space-xl);">
                <div style="width: 80px; height: 80px; margin: 0 auto var(--space-lg); background: var(--gradient-primary); border-radius: var(--radius-full); display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 800; color: white;" id="modalUserAvatar">
                    ع
                </div>
                <h4 style="font-size: 20px; font-weight: 900; margin-bottom: var(--space-xs); background: var(--gradient-primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;" id="modalUserName">
                    علی محمدی
                </h4>
                <p style="color: var(--text-tertiary); font-size: 12px;" id="modalUserPhone">
                    <i class="fas fa-calendar-alt"></i> عضو از ۱۴۰۲/۰۵/۱۰
                </p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="modalUserLevel">۵</div>
                    <div class="stat-label">سطح</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="modalUserTotalEarned">۱۲۴K</div>
                    <div class="stat-label">درآمد کل</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="modalUserReferrals">۲۴</div>
                    <div class="stat-label">زیرمجموعه</div>
                </div>
            </div>
            
            <button class="btn btn-primary" style="width: 100%; margin-top: var(--space-xl);" onclick="editProfile()">
                <i class="fas fa-edit"></i>
                ویرایش پروفایل
            </button>
        </div>
    </div>

    <div id="campaignModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="campaignModalTitle">کمپین</h3>
                <button class="modal-close" onclick="closeModal('campaignModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div id="campaignModalContent">
                <!-- محتوای مودال کمپین به صورت داینامیک اضافه می‌شود -->
            </div>
        </div>
    </div>

    <!-- کانتینر توست -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // ==================== سیستم مدیریت داده‌ها ====================
        class SODmaxGame {
            constructor() {
                this.currentUser = null;
                this.gameData = {
                    mining: {
                        power: 18,
                        multiplier: 1,
                        autoMining: false,
                        todayEarned: 2450,
                        totalMined: 1845200,
                        level: 3,
                        boostEndTime: null
                    },
                    wallet: {
                        sod: 1845200,
                        toman: 28400,
                        usdt: 120.5
                    },
                    campaigns: {
                        active: [
                            { id: 1, name: "۱۰۰ کلیک در بازی", reward: 500, progress: 45, max: 100 },
                            { id: 2, name: "دعوت ۵ دوست", reward: 1000, progress: 2, max: 5 }
                        ],
                        completed: 48
                    },
                    referrals: {
                        total: 24,
                        active: 18,
                        pending: 3,
                        totalEarnings: 124000,
                        code: "ALI12345",
                        link: "https://sodmax.city/invite/ALI12345"
                    },
                    user: {
                        name: "علی محمدی",
                        phone: "09123456789",
                        avatar: "ع",
                        level: 5,
                        joinDate: "۱۴۰۲/۰۵/۱۰",
                        lastLogin: "امروز",
                        totalEarned: 124500
                    },
                    transactions: [
                        {
                            id: 1,
                            type: "برداشت تومان",
                            amount: 50000,
                            currency: "تومان",
                            date: "امروز - ۱۴:۳۰",
                            status: "موفق",
                            icon: "fa-download",
                            color: "var(--secondary)"
                        },
                        {
                            id: 2,
                            type: "ارتقاء ماینر",
                            amount: -25000,
                            currency: "SOD",
                            date: "دیروز - ۱۰:۱۵",
                            status: "موفق",
                            icon: "fa-arrow-up",
                            color: "var(--accent)"
                        },
                        {
                            id: 3,
                            type: "استخراج دستی",
                            amount: 180,
                            currency: "SOD",
                            date: "امروز - ۱۲:۴۵",
                            status: "موفق",
                            icon: "fa-hard-hat",
                            color: "var(--primary)"
                        },
                        {
                            id: 4,
                            type: "پاداش کمپین",
                            amount: 500,
                            currency: "تومان",
                            date: "دیروز - ۱۸:۲۰",
                            status: "موفق",
                            icon: "fa-gift",
                            color: "var(--success)"
                        },
                        {
                            id: 5,
                            type: "پاداش دعوت",
                            amount: 1000,
                            currency: "تومان",
                            date: "۲ روز پیش - ۱۵:۱۰",
                            status: "موفق",
                            icon: "fa-user-plus",
                            color: "var(--info)"
                        }
                    ]
                };
                
                this.autoMiningInterval = null;
                this.boostInterval = null;
                
                this.initialize();
            }
            
            initialize() {
                // بارگذاری داده‌های ذخیره شده در localStorage
                const savedData = localStorage.getItem('sodmax_game_data');
                if (savedData) {
                    this.gameData = JSON.parse(savedData);
                }
                
                // بارگذاری کاربر جاری
                const savedUser = localStorage.getItem('sodmax_current_user');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                    this.showApp();
                } else {
                    this.showAuth();
                }
            }
            
            saveData() {
                localStorage.setItem('sodmax_game_data', JSON.stringify(this.gameData));
                if (this.currentUser) {
                    localStorage.setItem('sodmax_current_user', JSON.stringify(this.currentUser));
                }
            }
            
            showAuth() {
                document.getElementById('authPage').classList.remove('hidden');
                document.getElementById('app').style.display = 'none';
            }
            
            showApp() {
                document.getElementById('authPage').classList.add('hidden');
                document.getElementById('app').style.display = 'block';
                this.updateUI();
                
                // شروع استخراج اتوماتیک اگر فعال باشد
                if (this.gameData.mining.autoMining) {
                    this.startAutoMining();
                }
                
                // بررسی بوست
                if (this.gameData.mining.boostEndTime && Date.now() < this.gameData.mining.boostEndTime) {
                    this.startBoostTimer();
                }
            }
            
            register(name, phone, password, referralCode = null) {
                // بررسی تکراری نبودن شماره موبایل
                const users = JSON.parse(localStorage.getItem('sodmax_users') || '[]');
                if (users.find(u => u.phone === phone)) {
                    throw new Error('این شماره موبایل قبلاً ثبت‌نام کرده است');
                }
                
                // ایجاد کاربر جدید
                const newUser = {
                    id: Date.now(),
                    name,
                    phone,
                    password: btoa(password), // هش ساده
                    avatar: name.charAt(0),
                    level: 1,
                    joinDate: new Date().toLocaleDateString('fa-IR'),
                    lastLogin: new Date().toLocaleDateString('fa-IR'),
                    totalEarned: 0
                };
                
                // ایجاد داده‌های بازی برای کاربر جدید
                const userGameData = {
                    mining: {
                        power: 5,
                        multiplier: 1,
                        autoMining: false,
                        todayEarned: 0,
                        totalMined: 1000, // اعتبار اولیه
                        level: 1,
                        boostEndTime: null
                    },
                    wallet: {
                        sod: 1000,
                        toman: 0,
                        usdt: 0
                    },
                    campaigns: {
                        active: [],
                        completed: 0
                    },
                    referrals: {
                        total: 0,
                        active: 0,
                        pending: 0,
                        totalEarnings: 0,
                        code: this.generateReferralCode(name),
                        link: `https://sodmax.city/invite/${this.generateReferralCode(name)}`
                    },
                    user: newUser,
                    transactions: []
                };
                
                // ذخیره کاربر
                users.push(newUser);
                localStorage.setItem('sodmax_users', JSON.stringify(users));
                
                // ذخیره داده‌های بازی
                localStorage.setItem(`sodmax_data_${newUser.id}`, JSON.stringify(userGameData));
                
                // اگر کد دعوت وارد شده باشد
                if (referralCode) {
                    // پیدا کردن کاربر معرف
                    const referrer = users.find(u => u.referralCode === referralCode);
                    if (referrer) {
                        // به‌روزرسانی پاداش‌ها
                        const referrerData = JSON.parse(localStorage.getItem(`sodmax_data_${referrer.id}`));
                        referrerData.wallet.toman += 1000;
                        referrerData.referrals.total += 1;
                        referrerData.referrals.active += 1;
                        referrerData.referrals.totalEarnings += 1000;
                        referrerData.user.totalEarned += 1000;
                        
                        // پاداش برای کاربر جدید
                        userGameData.wallet.sod += 500;
                        
                        localStorage.setItem(`sodmax_data_${referrer.id}`, JSON.stringify(referrerData));
                        
                        // ثبت تراکنش برای کاربر معرف
                        referrerData.transactions.unshift({
                            id: Date.now(),
                            type: "پاداش دعوت",
                            amount: 1000,
                            currency: "تومان",
                            date: new Date().toLocaleDateString('fa-IR') + " - " + new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                            status: "موفق",
                            icon: "fa-user-plus",
                            color: "var(--secondary)"
                        });
                        
                        // ایجاد نوتیفیکیشن
                        this.addNotification(referrer.id, {
                            title: "🤝 دعوت موفق",
                            message: `${name} با کد دعوت شما ثبت‌نام کرد! +۱,۰۰۰ تومان پاداش`,
                            type: "success"
                        });
                    }
                }
                
                // ورود خودکار
                this.currentUser = newUser;
                this.gameData = userGameData;
                this.saveData();
                
                // ایجاد نوتیفیکیشن خوش‌آمدگویی
                this.addNotification(newUser.id, {
                    title: "👋 به SODmAX خوش آمدید",
                    message: `حساب کاربری شما با موفقیت ایجاد شد! ۱۰۰۰ SOD هدیه دریافت کردید.`,
                    type: "success"
                });
                
                return newUser;
            }
            
            login(phone, password) {
                const users = JSON.parse(localStorage.getItem('sodmax_users') || '[]');
                const user = users.find(u => u.phone === phone && btoa(password) === u.password);
                
                if (!user) {
                    throw new Error('شماره موبایل یا رمز عبور اشتباه است');
                }
                
                // بارگذاری داده‌های بازی کاربر
                const userGameData = JSON.parse(localStorage.getItem(`sodmax_data_${user.id}`));
                
                if (userGameData) {
                    this.gameData = userGameData;
                }
                
                // به‌روزرسانی تاریخ آخرین ورود
                user.lastLogin = new Date().toLocaleDateString('fa-IR');
                localStorage.setItem('sodmax_users', JSON.stringify(users));
                
                this.currentUser = user;
                this.saveData();
                
                return user;
            }
            
            logout() {
                this.currentUser = null;
                this.stopAutoMining();
                this.clearBoostTimer();
                localStorage.removeItem('sodmax_current_user');
                this.showAuth();
            }
            
            // ==================== سیستم استخراج ====================
            mine() {
                const power = this.gameData.mining.power;
                const multiplier = this.gameData.mining.multiplier;
                const earned = power * multiplier;
                
                // افزایش موجودی
                this.gameData.wallet.sod += earned;
                this.gameData.mining.todayEarned += earned;
                this.gameData.mining.totalMined += earned;
                this.gameData.user.totalEarned += earned * 0.01; // 1% ارزش SOD به تومان
                
                // افزایش پیشرفت کمپین کلیک
                const clickCampaign = this.gameData.campaigns.active.find(c => c.id === 1);
                if (clickCampaign && clickCampaign.progress < clickCampaign.max) {
                    clickCampaign.progress += 1;
                    
                    // اگر کمپین تکمیل شد
                    if (clickCampaign.progress >= clickCampaign.max) {
                        this.completeCampaign(clickCampaign.id);
                    }
                }
                
                // ثبت تراکنش
                this.gameData.transactions.unshift({
                    id: Date.now(),
                    type: "استخراج دستی",
                    amount: earned,
                    currency: "SOD",
                    date: new Date().toLocaleDateString('fa-IR') + " - " + new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                    status: "موفق",
                    icon: "fa-hard-hat",
                    color: "var(--primary)"
                });
                
                this.saveData();
                this.updateUI();
                
                return earned;
            }
            
            toggleAutoMining() {
                this.gameData.mining.autoMining = !this.gameData.mining.autoMining;
                
                if (this.gameData.mining.autoMining) {
                    this.startAutoMining();
                } else {
                    this.stopAutoMining();
                }
                
                this.saveData();
                this.updateUI();
                
                return this.gameData.mining.autoMining;
            }
            
            startAutoMining() {
                if (this.autoMiningInterval) {
                    clearInterval(this.autoMiningInterval);
                }
                
                this.autoMiningInterval = setInterval(() => {
                    if (this.gameData.mining.autoMining) {
                        const earned = this.mine();
                        this.showMiningEffect(earned);
                        
                        // پخش صدا
                        this.playSound('mining');
                        
                        // ویبره
                        this.vibrate([50, 30, 50]);
                    } else {
                        this.stopAutoMining();
                    }
                }, 5000); // هر 5 ثانیه
            }
            
            stopAutoMining() {
                if (this.autoMiningInterval) {
                    clearInterval(this.autoMiningInterval);
                    this.autoMiningInterval = null;
                }
            }
            
            boostMining() {
                const cost = 5000;
                
                if (this.gameData.wallet.sod < cost) {
                    throw new Error('موجودی SOD کافی نیست');
                }
                
                this.gameData.wallet.sod -= cost;
                this.gameData.mining.multiplier = 3;
                this.gameData.mining.boostEndTime = Date.now() + 30000; // 30 ثانیه
                
                // ثبت تراکنش
                this.gameData.transactions.unshift({
                    id: Date.now(),
                    type: "خرید بوست",
                    amount: -cost,
                    currency: "SOD",
                    date: new Date().toLocaleDateString('fa-IR') + " - " + new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                    status: "موفق",
                    icon: "fa-bolt",
                    color: "var(--accent)"
                });
                
                this.saveData();
                this.updateUI();
                this.startBoostTimer();
                
                return true;
            }
            
            startBoostTimer() {
                if (this.boostInterval) {
                    clearInterval(this.boostInterval);
                }
                
                this.boostInterval = setInterval(() => {
                    if (this.gameData.mining.boostEndTime && Date.now() >= this.gameData.mining.boostEndTime) {
                        this.gameData.mining.multiplier = 1;
                        this.gameData.mining.boostEndTime = null;
                        this.clearBoostTimer();
                        this.saveData();
                        this.updateUI();
                    }
                }, 1000);
            }
            
            clearBoostTimer() {
                if (this.boostInterval) {
                    clearInterval(this.boostInterval);
                    this.boostInterval = null;
                }
            }
            
            upgradeMiner() {
                const cost = this.getNextLevelCost(this.gameData.mining.level);
                
                if (this.gameData.wallet.sod < cost) {
                    throw new Error('موجودی SOD کافی نیست');
                }
                
                this.gameData.wallet.sod -= cost;
                this.gameData.mining.power += 5;
                this.gameData.mining.level += 1;
                
                // ثبت تراکنش
                this.gameData.transactions.unshift({
                    id: Date.now(),
                    type: "ارتقاء ماینر",
                    amount: -cost,
                    currency: "SOD",
                    date: new Date().toLocaleDateString('fa-IR') + " - " + new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                    status: "موفق",
                    icon: "fa-arrow-up",
                    color: "var(--accent)"
                });
                
                // ایجاد نوتیفیکیشن
                this.addNotification(this.currentUser.id, {
                    title: "🎉 ارتقاء موفق",
                    message: `ماینر شما به سطح ${this.gameData.mining.level} ارتقا یافت! قدرت +۵ افزایش یافت.`,
                    type: "success"
                });
                
                this.saveData();
                this.updateUI();
                
                return true;
            }
            
            getNextLevelCost(level) {
                return level * 10000;
            }
            
            // ==================== سیستم کمپین‌ها ====================
            startCampaign(campaignType) {
                let campaign;
                
                switch(campaignType) {
                    case 'digikala':
                        campaign = {
                            title: "کلیک تبلیغ دیجی‌کالا",
                            description: "بر روی تبلیغ کلیک کنید و ۳۰ ثانیه صفحه را مشاهده نمایید",
                            reward: { toman: 500 },
                            duration: 30, // ثانیه
                            type: "click"
                        };
                        break;
                    case 'snapp':
                        campaign = {
                            title: "نصب اپلیکیشن اسنپ",
                            description: "اپلیکیشن اسنپ را نصب و ثبت‌نام کنید",
                            reward: { toman: 5000 },
                            duration: 60,
                            type: "install"
                        };
                        break;
                    case 'ap':
                        campaign = {
                            title: "اشتراک اینستاگرام",
                            description: "صفحه ما را در اینستاگرام فالو کنید",
                            reward: { sod: 2000 },
                            duration: 10,
                            type: "share"
                        };
                        break;
                    case 'tapsi':
                        campaign = {
                            title: "مشاهده ویدیو تبلیغاتی",
                            description: "ویدیو تبلیغاتی تپسی را به طور کامل مشاهده کنید",
                            reward: { toman: 1000 },
                            duration: 45,
                            type: "view"
                        };
                        break;
                    default:
                        return;
                }
                
                this.showCampaignModal(campaign);
            }
            
            completeCampaign(campaignId) {
                const campaign = this.gameData.campaigns.active.find(c => c.id === campaignId);
                if (!campaign) return;
                
                // پرداخت پاداش
                this.gameData.wallet.toman += campaign.reward;
                this.gameData.user.totalEarned += campaign.reward;
                this.gameData.campaigns.completed += 1;
                
                // حذف از کمپین‌های فعال
                this.gameData.campaigns.active = this.gameData.campaigns.active.filter(c => c.id !== campaignId);
                
                // ثبت تراکنش
                this.gameData.transactions.unshift({
                    id: Date.now(),
                    type: "پاداش کمپین",
                    amount: campaign.reward,
                    currency: "تومان",
                    date: new Date().toLocaleDateString('fa-IR') + " - " + new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                    status: "موفق",
                    icon: "fa-gift",
                    color: "var(--success)"
                });
                
                // ایجاد نوتیفیکیشن
                this.addNotification(this.currentUser.id, {
                    title: "✅ کمپین تکمیل شد",
                    message: `کمپین "${campaign.name}" تکمیل شد! +${campaign.reward.toLocaleString('fa-IR')} تومان دریافت کردید.`,
                    type: "success"
                });
                
                // اضافه کردن کمپین جدید
                this.addNewCampaign();
                
                this.saveData();
                this.updateUI();
                
                return campaign.reward;
            }
            
            addNewCampaign() {
                const newId = this.gameData.campaigns.active.length > 0 ? 
                    Math.max(...this.gameData.campaigns.active.map(c => c.id)) + 1 : 1;
                
                const campaignsPool = [
                    { name: "۲۰۰ کلیک در بازی", reward: 1000, max: 200 },
                    { name: "دعوت ۳ دوست", reward: 2000, max: 3 },
                    { name: "ارتقاء ماینر", reward: 3000, max: 1 },
                    { name: "برداشت تومان", reward: 1500, max: 1 }
                ];
                
                const randomCampaign = campaignsPool[Math.floor(Math.random() * campaignsPool.length)];
                
                this.gameData.campaigns.active.push({
                    id: newId,
                    name: randomCampaign.name,
                    reward: randomCampaign.reward,
                    progress: 0,
                    max: randomCampaign.max
                });
            }
            
            // ==================== سیستم کیف پول ====================
            withdrawToman() {
                const minAmount = 10000;
                
                if (this.gameData.wallet.toman < minAmount) {
                    throw new Error(`حداقل مبلغ برداشت ${minAmount.toLocaleString('fa-IR')} تومان است`);
                }
                
                const amount = this.gameData.wallet.toman;
                this.gameData.wallet.toman = 0;
                
                // ثبت تراکنش
                this.gameData.transactions.unshift({
                    id: Date.now(),
                    type: "برداشت تومان",
                    amount: amount,
                    currency: "تومان",
                    date: new Date().toLocaleDateString('fa-IR') + " - " + new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                    status: "در حال پردازش",
                    icon: "fa-download",
                    color: "var(--secondary)"
                });
                
                // ایجاد نوتیفیکیشن
                this.addNotification(this.currentUser.id, {
                    title: "✅ درخواست ثبت شد",
                    message: `${amount.toLocaleString('fa-IR')} تومان برداشت شما ثبت شد. طی ۲۴ ساعت کاری واریز خواهد شد.`,
                    type: "success"
                });
                
                this.saveData();
                this.updateUI();
                
                return amount;
            }
            
            claimDailyReward() {
                const reward = 1000;
                this.gameData.wallet.toman += reward;
                this.gameData.user.totalEarned += reward;
                
                // ثبت تراکنش
                this.gameData.transactions.unshift({
                    id: Date.now(),
                    type: "پاداش روزانه",
                    amount: reward,
                    currency: "تومان",
                    date: new Date().toLocaleDateString('fa-IR') + " - " + new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                    status: "موفق",
                    icon: "fa-calendar-alt",
                    color: "var(--secondary)"
                });
                
                this.saveData();
                this.updateUI();
                
                return reward;
            }
            
            // ==================== سیستم دعوت ====================
            generateReferralCode(name) {
                const namePart = name.replace(/\s/g, '').substring(0, 3).toUpperCase();
                const randomPart = Math.floor(10000 + Math.random() * 90000);
                return `${namePart}${randomPart}`;
            }
            
            addReferral() {
                this.gameData.referrals.total += 1;
                this.gameData.referrals.pending += 1;
                this.gameData.user.totalEarned += 1000;
                
                // تأیید خودکار بعد از 3 ثانیه (برای نمایش)
                setTimeout(() => {
                    this.confirmReferral();
                }, 3000);
                
                this.saveData();
                this.updateUI();
                
                return true;
            }
            
            confirmReferral() {
                if (this.gameData.referrals.pending > 0) {
                    this.gameData.referrals.pending -= 1;
                    this.gameData.referrals.active += 1;
                    this.gameData.referrals.totalEarnings += 1000;
                    this.gameData.wallet.toman += 1000;
                    
                    // ثبت تراکنش
                    this.gameData.transactions.unshift({
                        id: Date.now(),
                        type: "پاداش دعوت",
                        amount: 1000,
                        currency: "تومان",
                        date: new Date().toLocaleDateString('fa-IR') + " - " + new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' }),
                        status: "موفق",
                        icon: "fa-user-plus",
                        color: "var(--info)"
                    });
                    
                    // ایجاد نوتیفیکیشن
                    this.addNotification(this.currentUser.id, {
                        title: "🤝 دعوت تأیید شد",
                        message: "دوست شما ثبت‌نام و تأیید شد! +۱,۰۰۰ تومان پاداش دریافت کردید.",
                        type: "success"
                    });
                    
                    this.saveData();
                    this.updateUI();
                }
            }
            
            // ==================== ابزارهای کمکی ====================
            formatNumber(num) {
                if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
                if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
                return num.toString();
            }
            
            formatCurrency(num, currency = 'SOD') {
                return num.toLocaleString('fa-IR') + ' ' + currency;
            }
            
            showMiningEffect(amount) {
                const miner = document.querySelector('.miner-3d');
                if (!miner) return;
                
                const rect = miner.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                
                const effect = document.createElement('div');
                effect.className = 'mining-effect';
                effect.innerHTML = `<span>+${amount} SOD</span>`;
                
                effect.style.left = `${centerX}px`;
                effect.style.top = `${centerY}px`;
                
                document.body.appendChild(effect);
                
                // ایجاد اسپارکل‌ها
                for (let i = 0; i < 10; i++) {
                    this.createSparkle(centerX, centerY);
                }
                
                setTimeout(() => effect.remove(), 1100);
            }
            
            createSparkle(x, y) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                
                const angle = Math.random() * Math.PI * 2;
                const distance = Math.random() * 100 + 50;
                const endX = x + Math.cos(angle) * distance;
                const endY = y + Math.sin(angle) * distance;
                
                sparkle.style.left = `${x}px`;
                sparkle.style.top = `${y}px`;
                
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    sparkle.style.left = `${endX}px`;
                    sparkle.style.top = `${endY}px`;
                }, 10);
                
                setTimeout(() => sparkle.remove(), 510);
            }
            
            playSound(type) {
                // پخش صدای ساده با Web Audio API
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    if (type === 'mining') {
                        oscillator.frequency.value = 800;
                        oscillator.type = 'sine';
                        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.1);
                    } else if (type === 'success') {
                        oscillator.frequency.value = 1200;
                        oscillator.type = 'triangle';
                        gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.2);
                    }
                } catch (e) {
                    console.log('پخش صدا پشتیبانی نمی‌شود');
                }
            }
            
            vibrate(pattern) {
                if (navigator.vibrate) {
                    navigator.vibrate(pattern);
                }
            }
            
            addNotification(userId, notification) {
                const notifications = JSON.parse(localStorage.getItem(`sodmax_notifications_${userId}`) || '[]');
                notification.id = Date.now();
                notification.time = new Date().toLocaleTimeString('fa-IR', { hour: '2-digit', minute: '2-digit' });
                notification.read = false;
                notifications.unshift(notification);
                localStorage.setItem(`sodmax_notifications_${userId}`, JSON.stringify(notifications));
                
                this.updateNotificationBadge();
            }
            
            getUnreadNotificationsCount() {
                if (!this.currentUser) return 0;
                const notifications = JSON.parse(localStorage.getItem(`sodmax_notifications_${this.currentUser.id}`) || '[]');
                return notifications.filter(n => !n.read).length;
            }
            
            updateNotificationBadge() {
                const count = this.getUnreadNotificationsCount();
                const badge = document.getElementById('notificationBadge');
                if (badge) {
                    if (count > 0) {
                        badge.textContent = count > 9 ? '9+' : count;
                        badge.style.display = 'flex';
                    } else {
                        badge.style.display = 'none';
                    }
                }
            }
            
            // ==================== رابط کاربری ====================
            updateUI() {
                if (!this.currentUser) return;
                
                const data = this.gameData;
                
                // آمار سریع
                document.getElementById('statSOD').textContent = this.formatNumber(data.wallet.sod);
                document.getElementById('statToman').textContent = this.formatNumber(data.wallet.toman);
                document.getElementById('statReferrals').textContent = data.referrals.total;
                
                // استخراج
                const earned = data.mining.power * data.mining.multiplier;
                document.getElementById('clickReward').textContent = `+${earned} SOD`;
                document.getElementById('miningPower').textContent = `${earned}x`;
                document.getElementById('miningToday').textContent = this.formatNumber(data.mining.todayEarned);
                document.getElementById('miningTotal').textContent = this.formatNumber(data.mining.totalMined);
                document.getElementById('miningTodayText').textContent = `+${data.mining.todayEarned.toLocaleString('fa-IR')} SOD`;
                document.getElementById('autoMiningBtn').innerHTML = data.mining.autoMining ? 
                    '<i class="fas fa-pause"></i><span>متوقف</span>' : 
                    '<i class="fas fa-robot"></i><span>خودکار</span>';
                
                // ارتقاء ماینر
                document.getElementById('minerLevel').textContent = data.mining.level;
                const nextLevelCost = this.getNextLevelCost(data.mining.level);
                document.getElementById('nextLevelCost').textContent = this.formatCurrency(nextLevelCost, 'SOD');
                document.getElementById('currentPower').textContent = `${data.mining.power}x`;
                document.getElementById('nextPower').textContent = `${data.mining.power + 5}x`;
                document.getElementById('upgradeCost').textContent = this.formatCurrency(nextLevelCost, 'SOD');
                document.getElementById('upgradeCostBtn').textContent = this.formatNumber(nextLevelCost);
                
                // کمپین‌ها
                const campaign1 = data.campaigns.active[0];
                if (campaign1) {
                    const progressPercent = (campaign1.progress / campaign1.max) * 100;
                    document.getElementById('campaign1Progress').style.width = `${progressPercent}%`;
                    document.getElementById('campaign1Text').textContent = `${campaign1.progress}/${campaign1.max}`;
                }
                
                const campaign2 = data.campaigns.active[1];
                if (campaign2) {
                    const progressPercent = (campaign2.progress / campaign2.max) * 100;
                    document.getElementById('campaign2Progress').style.width = `${progressPercent}%`;
                    document.getElementById('campaign2Text').textContent = `${campaign2.progress}/${campaign2.max}`;
                }
                
                // کیف پول
                document.getElementById('walletSOD').textContent = data.wallet.sod.toLocaleString('fa-IR');
                document.getElementById('walletToman').textContent = data.wallet.toman.toLocaleString('fa-IR');
                document.getElementById('modalSOD').textContent = `${data.wallet.sod.toLocaleString('fa-IR')} SOD`;
                document.getElementById('modalToman').textContent = `${data.wallet.toman.toLocaleString('fa-IR')} تومان`;
                
                // دعوت دوستان
                document.getElementById('referralCount').textContent = `${data.referrals.total} دوست دعوت کرده‌اید`;
                document.getElementById('totalReferralEarnings').textContent = this.formatNumber(data.referrals.totalEarnings);
                document.getElementById('referralLink').textContent = data.referrals.link;
                document.getElementById('totalInvites').textContent = data.referrals.total;
                document.getElementById('activeInvites').textContent = data.referrals.active;
                document.getElementById('pendingInvites').textContent = data.referrals.pending;
                
                // پروفایل
                document.getElementById('userAvatar').textContent = data.user.avatar;
                document.getElementById('userName').textContent = data.user.name;
                document.getElementById('userPhone').innerHTML = `<i class="fas fa-phone"></i> ${data.user.phone}`;
                document.getElementById('userLevel').textContent = data.user.level;
                document.getElementById('userJoinDate').textContent = data.user.joinDate;
                document.getElementById('userLastLogin').textContent = data.user.lastLogin;
                document.getElementById('userTotalEarned').textContent = this.formatNumber(data.user.totalEarned);
                document.getElementById('modalUserAvatar').textContent = data.user.avatar;
                document.getElementById('modalUserName').textContent = data.user.name;
                document.getElementById('modalUserPhone').innerHTML = `<i class="fas fa-calendar-alt"></i> عضو از ${data.user.joinDate}`;
                document.getElementById('modalUserLevel').textContent = data.user.level;
                document.getElementById('modalUserTotalEarned').textContent = this.formatNumber(data.user.totalEarned);
                document.getElementById('modalUserReferrals').textContent = data.referrals.total;
                
                // تاریخچه تراکنش‌ها
                this.updateTransactionHistory();
                
                // نوتیفیکیشن‌ها
                this.updateNotificationBadge();
            }
            
            updateTransactionHistory() {
                const container = document.getElementById('transactionHistory');
                if (!container) return;
                
                container.innerHTML = '';
                
                this.gameData.transactions.slice(0, 5).forEach(transaction => {
                    const isNegative = transaction.amount < 0;
                    const amountText = isNegative ? 
                        `-${Math.abs(transaction.amount).toLocaleString('fa-IR')}` : 
                        `+${transaction.amount.toLocaleString('fa-IR')}`;
                    
                    const amountColor = isNegative ? 'var(--accent)' : 
                        (transaction.currency === 'SOD' ? 'var(--primary)' : 'var(--secondary)');
                    
                    const row = document.createElement('tr');
                    row.onclick = () => {
                        this.showToast(
                            transaction.type,
                            `مبلغ: ${amountText} ${transaction.currency}<br>تاریخ: ${transaction.date}<br>وضعیت: ${transaction.status}`,
                            'info'
                        );
                    };
                    row.style.cursor = 'pointer';
                    
                    row.innerHTML = `
                        <td>${transaction.type}</td>
                        <td style="color: ${amountColor}; font-weight: 700;">${amountText} ${transaction.currency}</td>
                        <td style="font-size: 12px; color: var(--text-tertiary);">${transaction.date}</td>
                        <td><span class="badge badge-success">${transaction.status}</span></td>
                    `;
                    
                    container.appendChild(row);
                });
            }
            
            showCampaignModal(campaign) {
                document.getElementById('campaignModalTitle').textContent = campaign.title;
                
                const content = document.getElementById('campaignModalContent');
                content.innerHTML = `
                    <div style="margin-bottom: var(--space-lg);">
                        <p style="color: var(--text-secondary); margin-bottom: var(--space-lg);">${campaign.description}</p>
                        
                        ${campaign.reward.sod ? `
                            <div style="background: rgba(0, 102, 255, 0.1); padding: var(--space-md); border-radius: var(--radius-lg); margin-bottom: var(--space-md);">
                                <div style="font-size: 12px; color: var(--text-tertiary);">پاداش SOD</div>
                                <div style="font-size: 20px; font-weight: 900; color: var(--primary);">+${campaign.reward.sod.toLocaleString('fa-IR')} SOD</div>
                            </div>
                        ` : ''}
                        
                        ${campaign.reward.toman ? `
                            <div style="background: rgba(0, 212, 170, 0.1); padding: var(--space-md); border-radius: var(--radius-lg);">
                                <div style="font-size: 12px; color: var(--text-tertiary);">پاداش تومان</div>
                                <div style="font-size: 20px; font-weight: 900; color: var(--secondary);">+${campaign.reward.toman.toLocaleString('fa-IR')} تومان</div>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div style="text-align: center; margin-top: var(--space-xl);">
                        <div id="campaignTimer" style="font-size: 32px; font-weight: 900; color: var(--primary); margin-bottom: var(--space-md);">
                            ${campaign.duration}
                        </div>
                        <div style="font-size: 12px; color: var(--text-tertiary); margin-bottom: var(--space-lg);">
                            ثانیه باقی‌مانده
                        </div>
                        
                        <button id="startCampaignBtn" class="btn btn-primary" style="width: 100%;">
                            <i class="fas fa-play"></i>
                            شروع کمپین
                        </button>
                    </div>
                `;
                
                const startBtn = content.querySelector('#startCampaignBtn');
                const timerDisplay = content.querySelector('#campaignTimer');
                
                let timeLeft = campaign.duration;
                let timerInterval = null;
                
                startBtn.onclick = () => {
                    startBtn.disabled = true;
                    startBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> در حال اجرا...';
                    
                    timerInterval = setInterval(() => {
                        timeLeft--;
                        timerDisplay.textContent = timeLeft;
                        
                        if (timeLeft <= 0) {
                            clearInterval(timerInterval);
                            this.completeCampaignModal(campaign);
                        }
                    }, 1000);
                };
                
                this.showModal('campaignModal');
            }
            
            completeCampaignModal(campaign) {
                const content = document.getElementById('campaignModalContent');
                content.innerHTML = `
                    <div style="text-align: center; padding: var(--space-xl);">
                        <div style="font-size: 64px; color: var(--success); margin-bottom: var(--space-lg);">✅</div>
                        <h4 style="font-size: 20px; font-weight: 900; color: var(--text-primary); margin-bottom: var(--space-md);">
                            کمپین با موفقیت تکمیل شد!
                        </h4>
                        <p style="color: var(--text-secondary); margin-bottom: var(--space-xl);">
                            پاداش شما به کیف پول اضافه شد
                        </p>
                        
                        ${campaign.reward.sod ? `
                            <div style="font-size: 28px; font-weight: 900; color: var(--primary); margin-bottom: var(--space-sm);">
                                +${campaign.reward.sod.toLocaleString('fa-IR')} SOD
                            </div>
                        ` : ''}
                        
                        ${campaign.reward.toman ? `
                            <div style="font-size: 28px; font-weight: 900; color: var(--secondary);">
                                +${campaign.reward.toman.toLocaleString('fa-IR')} تومان
                            </div>
                        ` : ''}
                        
                        <button class="btn btn-success" style="width: 100%; margin-top: var(--space-xl);" onclick="closeModal('campaignModal')">
                            <i class="fas fa-check"></i>
                            متشکرم!
                        </button>
                    </div>
                `;
                
                // اضافه کردن پاداش به کیف پول
                if (campaign.reward.sod) {
                    this.gameData.wallet.sod += campaign.reward.sod;
                }
                if (campaign.reward.toman) {
                    this.gameData.wallet.toman += campaign.reward.toman;
                }
                
                this.saveData();
                this.updateUI();
                this.playSound('success');
                this.vibrate([100, 50, 100]);
            }
            
            showToast(title, message, type = 'info') {
                const container = document.getElementById('toastContainer');
                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                
                let icon = 'fa-bell';
                switch(type) {
                    case 'success': icon = 'fa-check-circle'; break;
                    case 'error': icon = 'fa-exclamation-circle'; break;
                    case 'warning': icon = 'fa-exclamation-triangle'; break;
                    case 'info': icon = 'fa-info-circle'; break;
                }
                
                toast.innerHTML = `
                    <div class="toast-icon">
                        <i class="fas ${icon}"></i>
                    </div>
                    <div class="toast-content">
                        <div class="toast-title">${title}</div>
                        <div class="toast-message">${message}</div>
                    </div>
                `;
                
                container.appendChild(toast);
                
                setTimeout(() => {
                    toast.style.opacity = '0';
                    toast.style.transform = 'translateY(-10px)';
                    setTimeout(() => toast.remove(), 300);
                }, 4000);
            }
        }

        // ==================== مقداردهی اولیه ====================
        const game = new SODmaxGame();

        // تابع‌های عمومی
        function showPage(pageId) {
            // پنهان کردن همه صفحات
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // نمایش صفحه انتخاب شده
            document.getElementById(`page${capitalizeFirstLetter(pageId)}`).classList.add('active');
            
            // به‌روزرسانی ناوبری
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`.nav-item[href="#${pageId}"]`).classList.add('active');
            
            // اسکرول به بالا
            window.scrollTo(0, 0);
        }

        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function showAuth() {
            document.getElementById('authPage').classList.remove('hidden');
            document.getElementById('app').style.display = 'none';
        }

        function showRegisterForm() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }

        function showLoginForm() {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }

        // ==================== عملکردهای بازی ====================
        function manualMine() {
            try {
                const earned = game.mine();
                game.showMiningEffect(earned);
                game.playSound('mining');
                game.vibrate([50, 30, 50]);
                game.showToast('⚡ استخراج موفق', `+${earned} SOD دریافت کردید!`, 'success');
            } catch (error) {
                game.showToast('⚠️ خطا', error.message, 'error');
            }
        }

        function toggleAutoMining() {
            try {
                const isAuto = game.toggleAutoMining();
                game.showToast(
                    isAuto ? '🤖 استخراج خودکار' : '⏹️ استخراج دستی',
                    isAuto ? 'استخراج خودکار فعال شد!' : 'استخراج خودکار متوقف شد',
                    'info'
                );
            } catch (error) {
                game.showToast('⚠️ خطا', error.message, 'error');
            }
        }

        function boostMining() {
            try {
                if (game.boostMining()) {
                    game.showToast('⚡ افزایش قدرت', 'قدرت استخراج شما ۳ برابر شد! (۳۰ ثانیه)', 'success');
                }
            } catch (error) {
                game.showToast('⚠️ خطا', error.message, 'error');
            }
        }

        function upgradeMiner() {
            try {
                if (game.upgradeMiner()) {
                    game.showToast('🆙 ارتقاء موفق', 'قدرت ماینر +۵ افزایش یافت!', 'success');
                }
            } catch (error) {
                game.showToast('⚠️ خطا', error.message, 'error');
            }
        }

        function startCampaign(type) {
            game.startCampaign(type);
        }

        function showCampaignDetail(id) {
            const campaign = game.gameData.campaigns.active.find(c => c.id === id);
            if (campaign) {
                Swal.fire({
                    title: campaign.name,
                    html: `
                        <div style="text-align: right;">
                            <p style="color: var(--text-secondary); margin-bottom: 20px;">برای تکمیل این کمپین باید ${campaign.max} بار کار را انجام دهید.</p>
                            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                                <div style="font-size: 12px; color: var(--text-tertiary);">پیشرفت</div>
                                <div style="width: 100%; height: 8px; background: rgba(255, 255, 255, 0.1); border-radius: 4px; margin: 10px 0; overflow: hidden;">
                                    <div style="width: ${(campaign.progress / campaign.max) * 100}%; height: 100%; background: var(--gradient-primary); border-radius: 4px;"></div>
                                </div>
                                <div style="font-size: 14px; color: var(--text-primary);">${campaign.progress} از ${campaign.max}</div>
                            </div>
                            <div style="background: rgba(0, 212, 170, 0.1); padding: 15px; border-radius: 10px;">
                                <div style="font-size: 12px; color: var(--text-tertiary);">پاداش</div>
                                <div style="font-size: 24px; font-weight: 900; color: var(--secondary);">+${campaign.reward.toLocaleString('fa-IR')} تومان</div>
                            </div>
                        </div>
                    `,
                    icon: 'info',
                    confirmButtonText: 'متوجه شدم',
                    confirmButtonColor: '#0066FF',
                    background: 'rgba(30, 41, 59, 0.95)',
                    color: '#fff'
                });
            }
        }

        function claimDailyReward() {
            try {
                const reward = game.claimDailyReward();
                game.showToast('📅 پاداش روزانه', `+${reward.toLocaleString('fa-IR')} تومان دریافت کردید!`, 'success');
                game.playSound('success');
                game.vibrate([100, 50, 100]);
            } catch (error) {
                game.showToast('⚠️ خطا', error.message, 'error');
            }
        }

        function withdrawToman() {
            try {
                const amount = game.withdrawToman();
                closeModal('walletModal');
                game.showToast('✅ درخواست ثبت شد', 
                    `${amount.toLocaleString('fa-IR')} تومان برداشت شما ثبت شد.<br>طی ۲۴ ساعت کاری واریز خواهد شد.`,
                    'success'
                );
            } catch (error) {
                game.showToast('⚠️ خطا', error.message, 'error');
            }
        }

        function buySOD() {
            game.showToast('🛒 خرید SOD', 'صفحه خرید به زودی فعال خواهد شد!', 'info');
        }

        function convertCurrency() {
            game.showToast('💰 تبدیل ارز', 'سیستم تبدیل ارز به زودی فعال خواهد شد!', 'info');
        }

        function editProfile() {
            game.showToast('👤 ویرایش پروفایل', 'صفحه ویرایش پروفایل به زودی فعال خواهد شد!', 'info');
        }

        function changePassword() {
            game.showToast('🔐 تغییر رمز عبور', 'صفحه تغییر رمز عبور به زودی فعال خواهد شد!', 'info');
        }

        // ==================== عملکردهای دعوت ====================
        function copyReferralLink() {
            const link = game.gameData.referrals.link;
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(link).then(() => {
                    game.showToast('📋 کپی شد', 'لینک دعوت با موفقیت کپی شد!', 'success');
                }).catch(() => {
                    fallbackCopyToClipboard(link);
                });
            } else {
                fallbackCopyToClipboard(link);
            }
        }

        function fallbackCopyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                game.showToast('📋 کپی شد', 'محتوا با موفقیت کپی شد!', 'success');
            } catch (err) {
                game.showToast('⚠️ خطا', 'کپی کردن با مشکل مواجه شد', 'error');
            }
            
            document.body.removeChild(textArea);
        }

        function shareViaWhatsApp() {
            const user = game.currentUser;
            if (!user) return;
            
            const message = `به SODmAX CityVerse بپیوندید! 🌟\n\nبا استفاده از لینک زیر ثبت‌نام کنید و ۱۰۰۰ SOD هدیه دریافت کنید:\n${game.gameData.referrals.link}\n\nکد دعوت: ${game.gameData.referrals.code}`;
            const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
            
            window.open(url, '_blank');
            game.showToast('📱 اشتراک‌گذاری', 'در حال بازکردن واتساپ...', 'info');
        }

        function shareViaTelegram() {
            const user = game.currentUser;
            if (!user) return;
            
            const message = `به SODmAX CityVerse بپیوندید! 🌟\n\nبا استفاده از لینک زیر ثبت‌نام کنید و ۱۰۰۰ SOD هدیه دریافت کنید:\n${game.gameData.referrals.link}\n\nکد دعوت: ${game.gameData.referrals.code}`;
            const url = `https://t.me/share/url?url=${encodeURIComponent(game.gameData.referrals.link)}&text=${encodeURIComponent(message)}`;
            
            window.open(url, '_blank');
            game.showToast('📱 اشتراک‌گذاری', 'در حال بازکردن تلگرام...', 'info');
        }

        function shareViaInstagram() {
            game.showToast('📱 اینستاگرام', 'اشتراک‌گذاری در اینستاگرام به زودی فعال خواهد شد!', 'info');
        }

        function inviteFriend() {
            try {
                if (game.addReferral()) {
                    game.showToast('🤝 دعوت ارسال شد', 'دعوت شما ثبت شد. بعد از تأیید دوستتان، ۱,۰۰۰ تومان پاداش دریافت خواهید کرد!', 'info');
                }
            } catch (error) {
                game.showToast('⚠️ خطا', error.message, 'error');
            }
        }

        // ==================== عملکردهای احراز هویت ====================
        document.getElementById('registerFormElement').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('registerName').value.trim();
            const phone = document.getElementById('registerPhone').value.trim();
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            const referralCode = document.getElementById('registerReferralCode').value.trim() || null;
            
            let hasError = false;
            
            // اعتبارسنجی
            if (name.length < 2) {
                showError('nameError', 'نام باید حداقل ۲ کاراکتر باشد');
                hasError = true;
            } else {
                hideError('nameError');
            }
            
            const phoneRegex = /^09[0-9]{9}$/;
            if (!phoneRegex.test(phone)) {
                showError('phoneError', 'شماره موبایل معتبر وارد کنید (مثال: 09123456789)');
                hasError = true;
            } else {
                hideError('phoneError');
            }
            
            if (password.length < 6) {
                showError('passwordError', 'رمز عبور باید حداقل ۶ کاراکتر باشد');
                hasError = true;
            } else {
                hideError('passwordError');
            }
            
            if (password !== confirmPassword) {
                showError('confirmPasswordError', 'رمز عبور با تکرار آن مطابقت ندارد');
                hasError = true;
            } else {
                hideError('confirmPasswordError');
            }
            
            if (hasError) return;
            
            const registerBtn = document.getElementById('registerBtn');
            registerBtn.disabled = true;
            registerBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> در حال ثبت‌نام...';
            
            setTimeout(() => {
                try {
                    const user = game.register(name, phone, password, referralCode);
                    
                    game.showToast('✅ ثبت‌نام موفق', 'حساب کاربری شما با موفقیت ایجاد شد!', 'success');
                    
                    setTimeout(() => {
                        showPage('dashboard');
                    }, 1500);
                } catch (error) {
                    showError('phoneError', error.message);
                    registerBtn.disabled = false;
                    registerBtn.innerHTML = '<i class="fas fa-user-plus"></i> ایجاد حساب کاربری';
                }
            }, 1500);
        });

        document.getElementById('loginFormElement').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const phone = document.getElementById('loginPhone').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            let hasError = false;
            
            if (phone.length === 0) {
                showError('loginPhoneError', 'شماره موبایل خود را وارد کنید');
                hasError = true;
            } else {
                hideError('loginPhoneError');
            }
            
            if (password.length === 0) {
                showError('loginPasswordError', 'رمز عبور خود را وارد کنید');
                hasError = true;
            } else {
                hideError('loginPasswordError');
            }
            
            if (hasError) return;
            
            const loginBtn = document.getElementById('loginBtn');
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> در حال ورود...';
            
            setTimeout(() => {
                try {
                    const user = game.login(phone, password);
                    
                    game.showToast('✅ ورود موفق', `خوش آمدید ${user.name}!`, 'success');
                    
                    setTimeout(() => {
                        showPage('dashboard');
                    }, 1500);
                } catch (error) {
                    showError('loginPhoneError', error.message);
                    loginBtn.disabled = false;
                    loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> ورود به حساب';
                }
            }, 1500);
        });

        // نمایش/پنهان کردن رمز عبور
        document.getElementById('toggleRegisterPassword').addEventListener('click', function() {
            togglePasswordVisibility('registerPassword', this);
        });

        document.getElementById('toggleRegisterConfirmPassword').addEventListener('click', function() {
            togglePasswordVisibility('registerConfirmPassword', this);
        });

        document.getElementById('toggleLoginPassword').addEventListener('click', function() {
            togglePasswordVisibility('loginPassword', this);
        });

        function togglePasswordVisibility(inputId, button) {
            const input = document.getElementById(inputId);
            const icon = button.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        // تغییر بین فرم‌ها
        document.getElementById('showLoginBtn').addEventListener('click', showLoginForm);
        document.getElementById('showRegisterBtn').addEventListener('click', showRegisterForm);
        document.getElementById('forgotPasswordBtn').addEventListener('click', function() {
            game.showToast('🔐 بازیابی رمز عبور', 'این قابلیت به زودی فعال خواهد شد!', 'info');
        });

        // تابع‌های کمکی
        function showError(elementId, message) {
            const element = document.getElementById(elementId);
            element.querySelector('i').nextSibling.textContent = message;
            element.classList.add('show');
            
            const inputId = elementId.replace('Error', '');
            const input = document.getElementById(inputId);
            if (input) {
                input.classList.add('error');
            }
        }

        function hideError(elementId) {
            const element = document.getElementById(elementId);
            element.classList.remove('show');
            
            const inputId = elementId.replace('Error', '');
            const input = document.getElementById(inputId);
            if (input) {
                input.classList.remove('error');
            }
        }

        function showTerms() {
            Swal.fire({
                title: 'قوانین و مقررات',
                html: `
                    <div style="text-align: right; max-height: 300px; overflow-y: auto;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">قوانین استفاده از SODmAX CityVerse</h3>
                        <ol style="padding-right: 20px; color: var(--text-secondary); line-height: 1.8;">
                            <li>کاربر متعهد می‌شود اطلاعات واقعی خود را ثبت کند.</li>
                            <li>هر کاربر تنها می‌تواند یک حساب کاربری داشته باشد.</li>
                            <li>استفاده از روش‌های غیرقانونی برای کسب درآمد ممنوع است.</li>
                            <li>سامانه حق مسدود کردن حساب‌های متخلف را دارد.</li>
                            <li>حداقل سن برای استفاده از سامانه ۱۸ سال است.</li>
                            <li>پرداخت‌ها حداکثر طی ۲۴ ساعت کاری انجام می‌شود.</li>
                            <li>کاربر مسئول حفظ امنیت حساب کاربری خود است.</li>
                        </ol>
                    </div>
                `,
                icon: 'info',
                confirmButtonText: 'متوجه شدم',
                confirmButtonColor: '#0066FF',
                background: 'rgba(30, 41, 59, 0.95)',
                color: '#fff',
                width: '500px'
            });
        }

        function showPrivacy() {
            Swal.fire({
                title: 'حریم خصوصی',
                html: `
                    <div style="text-align: right; max-height: 300px; overflow-y: auto;">
                        <h3 style="color: var(--primary); margin-bottom: 15px;">سیاست حفظ حریم خصوصی</h3>
                        <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 15px;">
                            ما در SODmAX CityVerse به حریم خصوصی کاربران احترام می‌گذاریم و اطلاعات شخصی شما را محرمانه نگه می‌داریم.
                        </p>
                        <ul style="padding-right: 20px; color: var(--text-secondary); line-height: 1.8;">
                            <li>اطلاعات شما تنها برای بهبود خدمات استفاده می‌شود.</li>
                            <li>اطلاعات شما به هیچ شخص ثالثی فروخته نمی‌شود.</li>
                            <li>از روش‌های امنیتی پیشرفته برای محافظت از داده‌ها استفاده می‌کنیم.</li>
                            <li>می‌توانید درخواست حذف اطلاعات خود را ارسال کنید.</li>
                            <li>کوکی‌ها تنها برای بهبود تجربه کاربری استفاده می‌شوند.</li>
                        </ul>
                    </div>
                `,
                icon: 'info',
                confirmButtonText: 'متوجه شدم',
                confirmButtonColor: '#0066FF',
                background: 'rgba(30, 41, 59, 0.95)',
                color: '#fff',
                width: '500px'
            });
        }

        function showNotifications() {
            const notifications = [
                { title: '🎉 به روزرسانی جدید', message: 'سیستم 3D و افکت‌های جدید اضافه شد!', time: '۵ دقیقه پیش' },
                { title: '💰 پاداش دریافت شد', message: 'مأموریت کلیک روزانه تکمیل شد! +۵۰۰ تومان', time: '۲ ساعت پیش' },
                { title: '🤝 دعوت موفق', message: 'دوست شما ثبت‌نام کرد! +۱,۰۰۰ تومان پاداش', time: '۱ روز پیش' }
            ];
            
            let html = '<div style="max-height: 400px; overflow-y: auto;">';
            notifications.forEach(notif => {
                html += `
                    <div style="padding: 15px; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                        <div style="font-size: 13px; font-weight: 800; color: var(--text-primary); margin-bottom: 4px;">
                            ${notif.title}
                        </div>
                        <div style="font-size: 12px; color: var(--text-secondary);">
                            ${notif.message}
                        </div>
                        <div style="font-size: 11px; color: var(--text-tertiary); margin-top: 6px;">
                            ${notif.time}
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            Swal.fire({
                title: 'اعلان‌ها',
                html: html,
                icon: 'info',
                showConfirmButton: false,
                showCloseButton: true,
                background: 'rgba(30, 41, 59, 0.95)',
                color: '#fff',
                width: '400px'
            });
        }

        function showUserMenu() {
            Swal.fire({
                title: '',
                html: `
                    <div style="text-align: center;">
                        <div style="width: 80px; height: 80px; margin: 0 auto 20px; background: var(--gradient-primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 800; color: white;">
                            ${game.gameData.user.avatar}
                        </div>
                        <h4 style="color: var(--text-primary); margin-bottom: 5px;">${game.gameData.user.name}</h4>
                        <p style="color: var(--text-tertiary); font-size: 12px;">سطح ${game.gameData.user.level}</p>
                    </div>
                    <div style="margin-top: 30px;">
                        <button onclick="showPage('profile')" class="swal2-confirm swal2-styled" style="width: 100%; margin-bottom: 10px; background: var(--primary);">
                            <i class="fas fa-user" style="margin-left: 8px;"></i> پروفایل
                        </button>
                        <button onclick="showPage('settings')" class="swal2-confirm swal2-styled" style="width: 100%; margin-bottom: 10px; background: var(--info);">
                            <i class="fas fa-cog" style="margin-left: 8px;"></i> تنظیمات
                        </button>
                        <button onclick="logout()" class="swal2-confirm swal2-styled" style="width: 100%; background: var(--error);">
                            <i class="fas fa-sign-out-alt" style="margin-left: 8px;"></i> خروج
                        </button>
                    </div>
                `,
                showConfirmButton: false,
                showCloseButton: true,
                background: 'rgba(30, 41, 59, 0.95)',
                color: '#fff',
                width: '300px'
            });
        }

        function logout() {
            Swal.fire({
                title: 'آیا مطمئن هستید؟',
                text: 'آیا می‌خواهید از حساب کاربری خود خارج شوید؟',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'بله، خارج شو',
                cancelButtonText: 'لغو',
                confirmButtonColor: '#EF4444',
                cancelButtonColor: '#6B7280',
                background: 'rgba(30, 41, 59, 0.95)',
                color: '#fff'
            }).then((result) => {
                if (result.isConfirmed) {
                    game.logout();
                    game.showToast('👋 خارج شدید', 'با موفقیت از حساب کاربری خارج شدید', 'success');
                    Swal.close();
                }
            });
        }

        // رویداد کلیک خارج از مودال
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        });

        // جلوگیری از اسکرول هنگام باز بودن مودال
        document.addEventListener('touchmove', function(event) {
            if (document.querySelector('.modal.active')) {
                event.preventDefault();
            }
        }, { passive: false });

        // توقف استخراج هنگام بستن صفحه
        window.addEventListener('beforeunload', function() {
            game.stopAutoMining();
            game.clearBoostTimer();
        });

        // تست اولیه
        console.log('🚀 SODmAX CityVerse راه‌اندازی شد!');
        console.log('🎮 یک بازی کامل کسب درآمد با استخراج ارز و کمپین‌های کسب‌وکاری');
        console.log('📱 کاملاً ریسپانسیو و بهینه برای موبایل');
        console.log('💾 تمام داده‌ها در localStorage ذخیره می‌شوند');
        console.log('⚡ هیچ وابستگی به Backend ندارد');
    </script>
</body>
</html>
